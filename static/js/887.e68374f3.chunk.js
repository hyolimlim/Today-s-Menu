"use strict";(self.webpackChunkrecipe=self.webpackChunkrecipe||[]).push([[887],{887:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(152),a=t(791),i=t(82),s=(t(970),t(516)),c=t(184);var o=function(){var e=(0,a.useContext)(s.y),n=e.setInput,t=e.setOption,r=(0,a.useRef)(),o=(0,a.useRef)(),u=(0,a.useCallback)((function(e){"Enter"===e.key&&e.target.value.trim().length>0&&(n(r.current.value),t(o.current.value))}),[]);return(0,c.jsxs)("div",{className:"searchbar",children:[(0,c.jsxs)("div",{className:"searchbar__inputitem",children:[(0,c.jsxs)("select",{ref:o,children:[(0,c.jsx)("option",{value:"\uc74c\uc2dd\uba85",children:"\uc74c\uc2dd\uba85"}),(0,c.jsx)("option",{value:"\uc7ac\ub8cc\uba85",children:"\uc7ac\ub8cc\uba85"})]}),(0,c.jsx)("input",{className:"input",onKeyDown:u,ref:r,placeholder:"\ub808\uc2dc\ud53c\ub97c \uac80\uc0c9\ud574\ubcf4\uc138\uc694"})]}),(0,c.jsx)("div",{className:"searchbar__icon",onClick:function(){n(r.current.value),t(o.current.value)},children:(0,c.jsx)(i.W1,{width:"30px",height:"30px",fill:"#5f8d4e"})})]})},u=t(165),l=t(861),d=t(211);var f=function(){return{scrollToTop:function(){window.scrollTo({top:0,behavior:"smooth"})}}};var v=function(e){var n=e.data,t=(0,a.useContext)(s.y),r=t.setIsOpen,i=t.setData;return(0,c.jsxs)("div",{className:"recipe",onClick:function(){r(!0),i(n)},children:[(0,c.jsx)("img",{src:n.ATT_FILE_NO_MAIN,alt:"\ub300\ud45c \uc774\ubbf8\uc9c0"}),(0,c.jsxs)("div",{className:"recipe__item",children:[(0,c.jsx)("h1",{children:n.RCP_NM}),(0,c.jsx)("span",{children:n.RCP_PAT2})]})]})};var p=function(e){var n=e.flatRecipeArr;return(0,c.jsx)("div",{className:"recipelist",children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,c.jsx)(v,{data:e},n)}))})},h=t(661);var x=function(){var e=(0,a.useRef)(null),n=function(e){var n=(0,a.useState)(!1),t=(0,r.Z)(n,2),i=t[0],s=t[1];return(0,a.useEffect)((function(){if(e.current){var n=new IntersectionObserver((function(e){var n=(0,r.Z)(e,1)[0];return s(n.isIntersecting)}));return n.observe(e.current),function(){n.disconnect()}}}),[e]),i}(e),t=(0,a.useState)(!1),v=(0,r.Z)(t,2),x=v[0],j=v[1],m=function(){var e="http://openapi.foodsafetykorea.go.kr/api/".concat("d1f92fd34ae84af7be22","/COOKRCP01/json"),n=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t=(0,a.useContext)(s.y),r=t.recipe,i=t.setRecipe,c=t.total,o=t.setTotal,f=t.input,v=t.option,p=t.isNodata,h=t.setIsNodata,x=t.isLoadingData,j=t.setIsLoadingData,m=t.isEndData,C=t.setIsEndData,N=(0,d.ZP)((function(n,t){if(t&&0===t.COOKRCP01.row.length)return null;var r=0===n?0:10*n+1,a=0===n?10:10*n+10;return f?f&&v&&"\uc7ac\ub8cc\uba85"===v?"".concat(e,"/").concat(r,"/").concat(a,"/RCP_PARTS_DTLS=").concat(f):f&&v&&"\uc74c\uc2dd\uba85"===v?"".concat(e,"/").concat(r,"/").concat(a,"/RCP_NM=").concat(f):void 0:"".concat(e,"/").concat(r,"/").concat(a)}),n,{revalidateIfStale:!1,revalidateFirstPage:!1,revalidateOnFocus:!1,suspense:!0}),_=N.data,g=N.error,w=N.size,b=N.setSize,R=N.isLoading,E=N.isValidating;return(0,a.useEffect)((function(){var e=_.map((function(e){return e.COOKRCP01}));i(null===e||void 0===e?void 0:e.map((function(e){return e.row})).flat()),o(e[0].total_count),h("0"===e[0].total_count),j(!_&&!g&&f||R||E)}),[_]),(0,a.useEffect)((function(){Number(c)-r.length<1?C(!0):C(!1)}),[r]),{data:_,setSize:b,size:w,recipe:r,isLoadingData:x,isNodata:p,isEndData:m,isLoading:R}}(),C=m.setSize,N=m.size,_=m.recipe,g=m.isNodata,w=m.isEndData,b=m.isLoading,R=f().scrollToTop;(0,a.useEffect)((function(){var e=function(){window.scrollY>500?j(!0):j(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),(0,a.useEffect)((function(){n&&!b&!w&&C((function(){return N+1}))}),[n,b,w]);var E=(0,a.useContext)(s.y).isOpen;return(0,c.jsxs)("main",{className:"main",children:[(0,c.jsx)(o,{}),(0,c.jsx)("div",{className:"main__introduce",children:(0,c.jsx)("h1",{children:"\ub808\uc2dc\ud53c \ub9ac\uc2a4\ud2b8"})}),x?(0,c.jsx)("div",{className:"main__scrollbutton",onClick:function(){R()},children:(0,c.jsx)(i.SC,{})}):null,g?(0,c.jsx)("div",{children:"\ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,c.jsxs)(c.Fragment,{children:[E&&(0,c.jsx)(h.Z,{}),(0,c.jsx)(p,{flatRecipeArr:_})]}),(0,c.jsx)("div",{ref:e,className:"loading",children:b||g||w?null:(0,c.jsx)(i.gb,{})})]})}}}]);
//# sourceMappingURL=887.e68374f3.chunk.js.map